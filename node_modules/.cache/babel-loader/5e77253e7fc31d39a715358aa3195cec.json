{"ast":null,"code":"var _jsxFileName = \"/Users/batson24/Desktop/Date_Site/frontend/src/Components/Post.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport auth from '../Components/authenticator';\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\nimport Typography from '@material-ui/core/Typography';\nimport Avatar from '@material-ui/core/Avatar';\nimport IconButton from '@material-ui/core/IconButton';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport FavoriteIcon from '@material-ui/icons/Favorite';\nimport FavoriteBorderIcon from '@material-ui/icons/FavoriteBorder';\nimport CommentIcon from '@material-ui/icons/Comment';\nimport Divider from '@material-ui/core/Divider';\nimport PropTypes from 'prop-types';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Link } from 'react-router-dom';\nimport { remove, like, unlike } from './api-post.js';\nimport Comments from './Comments';\nconst useStyles = makeStyles(theme => ({\n  card: {\n    maxWidth: 600,\n    margin: 'auto',\n    marginBottom: theme.spacing(3),\n    backgroundColor: 'rgba(0, 0, 0, 0.06)'\n  },\n  cardContent: {\n    backgroundColor: 'white',\n    padding: `${theme.spacing(2)}px 0px`\n  },\n  cardHeader: {\n    paddingTop: theme.spacing(1),\n    paddingBottom: theme.spacing(1)\n  },\n  text: {\n    margin: theme.spacing(2)\n  },\n  photo: {\n    textAlign: 'center',\n    backgroundColor: '#f2f5f4',\n    padding: theme.spacing(1)\n  },\n  media: {\n    height: 200\n  },\n  button: {\n    margin: theme.spacing(1)\n  }\n}));\nexport default function Post(props) {\n  const classes = useStyles();\n  const jwt = auth.isAuthenticated();\n\n  const checkLike = likes => {\n    let match = likes.indexOf(jwt.user._id) !== -1;\n    return match;\n  };\n\n  const [values, setValues] = useState({\n    like: checkLike(props.post.likes),\n    likes: props.post.likes.length,\n    comments: props.post.comments\n  }); // useEffect(() => {\n  //   setValues({...values, like:checkLike(props.post.likes), likes: props.post.likes.length, comments: props.post.comments})\n  // }, [])\n\n  const clickLike = () => {\n    let callApi = values.like ? unlike : like;\n    callApi({\n      userId: jwt.user._id\n    }, {\n      t: jwt.token\n    }, props.post._id).then(data => {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        setValues({ ...values,\n          like: !values.like,\n          likes: data.likes.length\n        });\n      }\n    });\n  };\n\n  const updateComments = comments => {\n    setValues({ ...values,\n      comments: comments\n    });\n  };\n\n  const deletePost = () => {\n    remove({\n      postId: props.post._id\n    }, {\n      t: jwt.token\n    }).then(data => {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        props.onRemove(props.post);\n      }\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(Card, {\n    className: classes.card,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(CardHeader, {\n    avatar: /*#__PURE__*/React.createElement(Avatar, {\n      src: '/api/users/photo/' + props.post.postedBy._id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 15\n      }\n    }),\n    action: props.post.postedBy._id === auth.isAuthenticated().user._id && /*#__PURE__*/React.createElement(IconButton, {\n      onClick: deletePost,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(DeleteIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 17\n      }\n    })),\n    title: /*#__PURE__*/React.createElement(Link, {\n      to: \"/user/\" + props.post.postedBy._id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 20\n      }\n    }, props.post.postedBy.name),\n    subheader: new Date(props.post.created).toDateString(),\n    className: classes.cardHeader,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(CardContent, {\n    className: classes.cardContent,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    component: \"p\",\n    className: classes.text,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 11\n    }\n  }, props.post.text), props.post.photo && /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.photo,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 14\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: classes.media,\n    src: '/api/posts/photo/' + props.post._id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(CardActions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 9\n    }\n  }, values.like ? /*#__PURE__*/React.createElement(IconButton, {\n    onClick: clickLike,\n    className: classes.button,\n    \"aria-label\": \"Like\",\n    color: \"secondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(FavoriteIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 17\n    }\n  })) : /*#__PURE__*/React.createElement(IconButton, {\n    onClick: clickLike,\n    className: classes.button,\n    \"aria-label\": \"Unlike\",\n    color: \"secondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(FavoriteBorderIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 17\n    }\n  })), \" \", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 31\n    }\n  }, values.likes), /*#__PURE__*/React.createElement(IconButton, {\n    className: classes.button,\n    \"aria-label\": \"Comment\",\n    color: \"secondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(CommentIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 17\n    }\n  })), \" \", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 29\n    }\n  }, values.comments.length)), /*#__PURE__*/React.createElement(Divider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Comments, {\n    postId: props.post._id,\n    comments: values.comments,\n    updateComments: updateComments,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 9\n    }\n  }));\n}\nPost.propTypes = {\n  post: PropTypes.object.isRequired,\n  onRemove: PropTypes.func.isRequired\n};","map":{"version":3,"sources":["/Users/batson24/Desktop/Date_Site/frontend/src/Components/Post.jsx"],"names":["React","useState","useEffect","auth","Card","CardHeader","CardContent","CardActions","Typography","Avatar","IconButton","DeleteIcon","FavoriteIcon","FavoriteBorderIcon","CommentIcon","Divider","PropTypes","makeStyles","Link","remove","like","unlike","Comments","useStyles","theme","card","maxWidth","margin","marginBottom","spacing","backgroundColor","cardContent","padding","cardHeader","paddingTop","paddingBottom","text","photo","textAlign","media","height","button","Post","props","classes","jwt","isAuthenticated","checkLike","likes","match","indexOf","user","_id","values","setValues","post","length","comments","clickLike","callApi","userId","t","token","then","data","error","console","log","updateComments","deletePost","postId","onRemove","postedBy","name","Date","created","toDateString","propTypes","object","isRequired","func"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react'\nimport auth from '../Components/authenticator'\nimport Card from '@material-ui/core/Card'\nimport CardHeader from '@material-ui/core/CardHeader'\nimport CardContent from '@material-ui/core/CardContent'\nimport CardActions from '@material-ui/core/CardActions'\nimport Typography from '@material-ui/core/Typography'\nimport Avatar from '@material-ui/core/Avatar'\nimport IconButton from '@material-ui/core/IconButton'\nimport DeleteIcon from '@material-ui/icons/Delete'\nimport FavoriteIcon from '@material-ui/icons/Favorite'\nimport FavoriteBorderIcon from '@material-ui/icons/FavoriteBorder'\nimport CommentIcon from '@material-ui/icons/Comment'\nimport Divider from '@material-ui/core/Divider'\nimport PropTypes from 'prop-types'\nimport {makeStyles} from '@material-ui/core/styles'\nimport {Link} from 'react-router-dom'\nimport {remove, like, unlike} from './api-post.js'\nimport Comments from './Comments'\n\nconst useStyles = makeStyles(theme => ({\n  card: {\n    maxWidth:600,\n    margin: 'auto',\n    marginBottom: theme.spacing(3),\n    backgroundColor: 'rgba(0, 0, 0, 0.06)'\n  },\n  cardContent: {\n    backgroundColor: 'white',\n    padding: `${theme.spacing(2)}px 0px`\n  },\n  cardHeader: {\n    paddingTop: theme.spacing(1),\n    paddingBottom: theme.spacing(1)\n  },\n  text: {\n    margin: theme.spacing(2)\n  },\n  photo: {\n    textAlign: 'center',\n    backgroundColor: '#f2f5f4',\n    padding:theme.spacing(1)\n  },\n  media: {\n    height: 200\n  },\n  button: {\n   margin: theme.spacing(1),\n  }\n}))\n\nexport default function Post (props){\n  const classes = useStyles()\n  const jwt = auth.isAuthenticated()\n  const checkLike = (likes) => {\n    let match = likes.indexOf(jwt.user._id) !== -1\n    return match\n  }\n  const [values, setValues] = useState({\n    like: checkLike(props.post.likes),\n    likes: props.post.likes.length,\n    comments: props.post.comments\n  })\n  \n  // useEffect(() => {\n  //   setValues({...values, like:checkLike(props.post.likes), likes: props.post.likes.length, comments: props.post.comments})\n  // }, [])\n\n  \n\n  const clickLike = () => {\n    let callApi = values.like ? unlike : like\n    callApi({\n      userId: jwt.user._id\n    }, {\n      t: jwt.token\n    }, props.post._id).then((data) => {\n      if (data.error) {\n        console.log(data.error)\n      } else {\n        setValues({...values, like: !values.like, likes: data.likes.length})\n      }\n    })\n  }\n\n  const updateComments = (comments) => {\n    setValues({...values, comments: comments})\n  }\n\n  const deletePost = () => {   \n    remove({\n      postId: props.post._id\n    }, {\n      t: jwt.token\n    }).then((data) => {\n      if (data.error) {\n        console.log(data.error)\n      } else {\n        props.onRemove(props.post)\n      }\n    })\n  }\n\n    return (\n      <Card className={classes.card}>\n        <CardHeader\n            avatar={\n              <Avatar src={'/api/users/photo/'+props.post.postedBy._id}/>\n            }\n            action={props.post.postedBy._id === auth.isAuthenticated().user._id &&\n              <IconButton onClick={deletePost}>\n                <DeleteIcon />\n              </IconButton>\n            }\n            title={<Link to={\"/user/\" + props.post.postedBy._id}>{props.post.postedBy.name}</Link>}\n            subheader={(new Date(props.post.created)).toDateString()}\n            className={classes.cardHeader}\n          />\n        <CardContent className={classes.cardContent}>\n          <Typography component=\"p\" className={classes.text}>\n            {props.post.text}\n          </Typography>\n          {props.post.photo &&\n            (<div className={classes.photo}>\n              <img\n                className={classes.media}\n                src={'/api/posts/photo/'+props.post._id}\n                />\n            </div>)}\n        </CardContent>\n        <CardActions>\n          { values.like\n            ? <IconButton onClick={clickLike} className={classes.button} aria-label=\"Like\" color=\"secondary\">\n                <FavoriteIcon />\n              </IconButton>\n            : <IconButton onClick={clickLike} className={classes.button} aria-label=\"Unlike\" color=\"secondary\">\n                <FavoriteBorderIcon />\n              </IconButton> } <span>{values.likes}</span>\n              <IconButton className={classes.button} aria-label=\"Comment\" color=\"secondary\">\n                <CommentIcon/>\n              </IconButton> <span>{values.comments.length}</span>\n        </CardActions>\n        <Divider/>\n        <Comments postId={props.post._id} comments={values.comments} updateComments={updateComments}/>\n      </Card>\n    )\n  \n}\n\nPost.propTypes = {\n  post: PropTypes.object.isRequired,\n  onRemove: PropTypes.func.isRequired\n}"]},"metadata":{},"sourceType":"module"}
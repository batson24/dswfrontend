{"ast":null,"code":"// import React, { useEffect, useState, useRef } from 'react';\n// // import './App.css';\n// import io from \"socket.io-client\";\n// import Peer from \"simple-peer\";\n// import styled from \"styled-components\";\n// const Container = styled.div`\n//   height: 100vh;\n//   width: 100%;\n//   display: flex;\n//   flex-direction: column;\n// `;\n// const Row = styled.div`\n//   display: flex;\n//   width: 100%;\n// `;\n// const Video = styled.video`\n//   border: 1px solid blue;\n//   width: 50%;\n//   height: 50%;\n// `;\n// function Socketpeer() {\n//   const [yourID, setYourID] = useState(\"\");\n//   const [users, setUsers] = useState({});\n//   const [stream, setStream] = useState();\n//   const [receivingCall, setReceivingCall] = useState(false);\n//   const [caller, setCaller] = useState(\"\");\n//   const [callerSignal, setCallerSignal] = useState();\n//   const [callAccepted, setCallAccepted] = useState(false);\n//   const userVideo = useRef();\n//   const partnerVideo = useRef();\n//   const socket = useRef();\n//   useEffect(() => {\n//     socket.current = io.connect(\"/\");\n//     navigator.mediaDevices.getUserMedia({ video: true, audio: true }).then(stream => {\n//       setStream(stream);\n//       if (userVideo.current) {\n//         userVideo.current.srcObject = stream;\n//       }\n//     })\n//     socket.current.on(\"yourID\", (id) => {\n//       setYourID(id);\n//     })\n//     socket.current.on(\"allUsers\", (users) => {\n//       setUsers(users);\n//     })\n//     socket.current.on(\"hey\", (data) => {\n//       setReceivingCall(true);\n//       setCaller(data.from);\n//       setCallerSignal(data.signal);\n//     })\n//   }, []);\n//   function callPeer(id) {\n//     const peer = new Peer({\n//       initiator: true,\n//       trickle: false,\n//       config: {\n//         iceServers: [\n//             {\n//                 urls: \"stun:numb.viagenie.ca\",\n//                 username: \"sultan1640@gmail.com\",\n//                 credential: \"98376683\"\n//             },\n//             {\n//                 urls: \"turn:numb.viagenie.ca\",\n//                 username: \"sultan1640@gmail.com\",\n//                 credential: \"98376683\"\n//             }\n//         ]\n//     },\n//       stream: stream,\n//     });\n//     peer.on(\"signal\", data => {\n//       socket.current.emit(\"callUser\", { userToCall: id, signalData: data, from: yourID })\n//     })\n//     peer.on(\"stream\", stream => {\n//       if (partnerVideo.current) {\n//         partnerVideo.current.srcObject = stream;\n//       }\n//     });\n//     socket.current.on(\"callAccepted\", signal => {\n//       setCallAccepted(true);\n//       peer.signal(signal);\n//     })\n//   }\n//   function acceptCall() {\n//     setCallAccepted(true);\n//     const peer = new Peer({\n//       initiator: false,\n//       trickle: false,\n//       stream: stream,\n//     });\n//     peer.on(\"signal\", data => {\n//       socket.current.emit(\"acceptCall\", { signal: data, to: caller })\n//     })\n//     peer.on(\"stream\", stream => {\n//       partnerVideo.current.srcObject = stream;\n//     });\n//     peer.signal(callerSignal);\n//   }\n//   let UserVideo;\n//   if (stream) {\n//     UserVideo = (\n//       <Video playsInline muted ref={userVideo} autoPlay />\n//     );\n//   }\n//   let PartnerVideo;\n//   if (callAccepted) {\n//     PartnerVideo = (\n//       <Video playsInline ref={partnerVideo} autoPlay />\n//     );\n//   }\n//   let incomingCall;\n//   if (receivingCall) {\n//     incomingCall = (\n//       <div>\n//         <h1>{caller} is calling you</h1>\n//         <button onClick={acceptCall}>Accept</button>\n//       </div>\n//     )\n//   }\n//   return (\n//     <Container>\n//       <Row>\n//         {UserVideo}\n//         {PartnerVideo}\n//       </Row>\n//       <Row>\n//         {Object.keys(users).map(key => {\n//           if (key === yourID) {\n//             return null;\n//           }\n//           return (\n//             <button onClick={() => callPeer(key)}>Call {key}</button>\n//           );\n//         })}\n//       </Row>\n//       <Row>\n//         {incomingCall}\n//       </Row>\n//     </Container>\n//   );\n// }\n// export default Socketpeer","map":{"version":3,"sources":["/Users/batson24/Desktop/Date_Site/frontend/src/Components/Socketpeer.jsx"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA","sourcesContent":["// import React, { useEffect, useState, useRef } from 'react';\n// // import './App.css';\n// import io from \"socket.io-client\";\n// import Peer from \"simple-peer\";\n// import styled from \"styled-components\";\n\n// const Container = styled.div`\n//   height: 100vh;\n//   width: 100%;\n//   display: flex;\n//   flex-direction: column;\n// `;\n\n// const Row = styled.div`\n//   display: flex;\n//   width: 100%;\n// `;\n\n// const Video = styled.video`\n//   border: 1px solid blue;\n//   width: 50%;\n//   height: 50%;\n// `;\n\n// function Socketpeer() {\n//   const [yourID, setYourID] = useState(\"\");\n//   const [users, setUsers] = useState({});\n//   const [stream, setStream] = useState();\n//   const [receivingCall, setReceivingCall] = useState(false);\n//   const [caller, setCaller] = useState(\"\");\n//   const [callerSignal, setCallerSignal] = useState();\n//   const [callAccepted, setCallAccepted] = useState(false);\n\n//   const userVideo = useRef();\n//   const partnerVideo = useRef();\n//   const socket = useRef();\n\n//   useEffect(() => {\n//     socket.current = io.connect(\"/\");\n//     navigator.mediaDevices.getUserMedia({ video: true, audio: true }).then(stream => {\n//       setStream(stream);\n//       if (userVideo.current) {\n//         userVideo.current.srcObject = stream;\n//       }\n//     })\n\n//     socket.current.on(\"yourID\", (id) => {\n//       setYourID(id);\n//     })\n//     socket.current.on(\"allUsers\", (users) => {\n//       setUsers(users);\n//     })\n\n//     socket.current.on(\"hey\", (data) => {\n//       setReceivingCall(true);\n//       setCaller(data.from);\n//       setCallerSignal(data.signal);\n//     })\n//   }, []);\n\n//   function callPeer(id) {\n//     const peer = new Peer({\n//       initiator: true,\n//       trickle: false,\n//       config: {\n\n//         iceServers: [\n//             {\n//                 urls: \"stun:numb.viagenie.ca\",\n//                 username: \"sultan1640@gmail.com\",\n//                 credential: \"98376683\"\n//             },\n//             {\n//                 urls: \"turn:numb.viagenie.ca\",\n//                 username: \"sultan1640@gmail.com\",\n//                 credential: \"98376683\"\n//             }\n//         ]\n//     },\n//       stream: stream,\n//     });\n\n//     peer.on(\"signal\", data => {\n//       socket.current.emit(\"callUser\", { userToCall: id, signalData: data, from: yourID })\n//     })\n\n//     peer.on(\"stream\", stream => {\n//       if (partnerVideo.current) {\n//         partnerVideo.current.srcObject = stream;\n//       }\n//     });\n\n//     socket.current.on(\"callAccepted\", signal => {\n//       setCallAccepted(true);\n//       peer.signal(signal);\n//     })\n\n//   }\n\n//   function acceptCall() {\n//     setCallAccepted(true);\n//     const peer = new Peer({\n//       initiator: false,\n//       trickle: false,\n//       stream: stream,\n//     });\n//     peer.on(\"signal\", data => {\n//       socket.current.emit(\"acceptCall\", { signal: data, to: caller })\n//     })\n\n//     peer.on(\"stream\", stream => {\n//       partnerVideo.current.srcObject = stream;\n//     });\n\n//     peer.signal(callerSignal);\n//   }\n\n//   let UserVideo;\n//   if (stream) {\n//     UserVideo = (\n//       <Video playsInline muted ref={userVideo} autoPlay />\n//     );\n//   }\n\n//   let PartnerVideo;\n//   if (callAccepted) {\n//     PartnerVideo = (\n//       <Video playsInline ref={partnerVideo} autoPlay />\n//     );\n//   }\n\n//   let incomingCall;\n//   if (receivingCall) {\n//     incomingCall = (\n//       <div>\n//         <h1>{caller} is calling you</h1>\n//         <button onClick={acceptCall}>Accept</button>\n//       </div>\n//     )\n//   }\n//   return (\n//     <Container>\n//       <Row>\n//         {UserVideo}\n//         {PartnerVideo}\n//       </Row>\n//       <Row>\n//         {Object.keys(users).map(key => {\n//           if (key === yourID) {\n//             return null;\n//           }\n//           return (\n//             <button onClick={() => callPeer(key)}>Call {key}</button>\n//           );\n//         })}\n//       </Row>\n//       <Row>\n//         {incomingCall}\n//       </Row>\n//     </Container>\n//   );\n// }\n\n// export default Socketpeer"]},"metadata":{},"sourceType":"module"}
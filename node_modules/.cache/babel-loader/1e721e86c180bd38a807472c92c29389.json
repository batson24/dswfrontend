{"ast":null,"code":"var _jsxFileName = \"/Users/batson24/Desktop/Date_Site/frontend/src/Components/Editprofile.jsx\";\nimport React, { useEffect, useState } from 'react';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Typography from '@material-ui/core/Typography';\nimport Icon from '@material-ui/core/Icon';\nimport Avatar from '@material-ui/core/Avatar';\nimport FileUpload from '@material-ui/icons/AddPhotoAlternate';\nimport { makeStyles } from '@material-ui/core/styles';\nimport auth from './../auth/auth-helper';\nimport { read, update } from './api-user.js';\nimport { Redirect } from 'react-router-dom';\nconst useStyles = makeStyles(theme => ({\n  card: {\n    maxWidth: 600,\n    margin: 'auto',\n    textAlign: 'center',\n    marginTop: theme.spacing(5),\n    paddingBottom: theme.spacing(2)\n  },\n  title: {\n    margin: theme.spacing(2),\n    color: theme.palette.protectedTitle\n  },\n  error: {\n    verticalAlign: 'middle'\n  },\n  textField: {\n    marginLeft: theme.spacing(1),\n    marginRight: theme.spacing(1),\n    width: 300\n  },\n  submit: {\n    margin: 'auto',\n    marginBottom: theme.spacing(2)\n  },\n  bigAvatar: {\n    width: 60,\n    height: 60,\n    margin: 'auto'\n  },\n  input: {\n    display: 'none'\n  },\n  filename: {\n    marginLeft: '10px'\n  }\n}));\nexport default function EditProfile({\n  match\n}) {\n  const classes = useStyles();\n  const [values, setValues] = useState({\n    name: '',\n    about: '',\n    photo: '',\n    email: '',\n    password: '',\n    redirectToProfile: false,\n    error: '',\n    id: ''\n  });\n  const jwt = auth.isAuthenticated();\n  useEffect(() => {\n    const abortController = new AbortController();\n    const signal = abortController.signal;\n    read({\n      userId: match.params.userId\n    }, {\n      t: jwt.token\n    }, signal).then(data => {\n      if (data & data.error) {\n        setValues({ ...values,\n          error: data.error\n        });\n      } else {\n        setValues({ ...values,\n          id: data._id,\n          name: data.name,\n          email: data.email,\n          about: data.about\n        });\n      }\n    });\n    return function cleanup() {\n      abortController.abort();\n    };\n  }, [match.params.userId]);\n\n  const clickSubmit = () => {\n    let userData = new FormData();\n    values.name && userData.append('name', values.name);\n    values.email && userData.append('email', values.email);\n    values.passoword && userData.append('passoword', values.passoword);\n    values.about && userData.append('about', values.about);\n    values.photo && userData.append('photo', values.photo);\n    update({\n      userId: match.params.userId\n    }, {\n      t: jwt.token\n    }, userData).then(data => {\n      if (data && data.error) {\n        setValues({ ...values,\n          error: data.error\n        });\n      } else {\n        setValues({ ...values,\n          'redirectToProfile': true\n        });\n      }\n    });\n  };\n\n  const handleChange = name => event => {\n    const value = name === 'photo' ? event.target.files[0] : event.target.value; //userData.set(name, value)\n\n    setValues({ ...values,\n      [name]: value\n    });\n  };\n\n  const photoUrl = values.id ? `/api/users/photo/${values.id}?${new Date().getTime()}` : '/api/users/defaultphoto';\n\n  if (values.redirectToProfile) {\n    return /*#__PURE__*/React.createElement(Redirect, {\n      to: '/user/' + values.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 15\n      }\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(Card, {\n    className: classes.card,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(CardContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h6\",\n    className: classes.title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 11\n    }\n  }, \"Edit Profile\"), /*#__PURE__*/React.createElement(Avatar, {\n    src: photoUrl,\n    className: classes.bigAvatar,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 65\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    accept: \"image/*\",\n    onChange: handleChange('photo'),\n    className: classes.input,\n    id: \"icon-button-file\",\n    type: \"file\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"icon-button-file\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    color: \"default\",\n    component: \"span\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 13\n    }\n  }, \"Upload\", /*#__PURE__*/React.createElement(FileUpload, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 15\n    }\n  }))), \" \", /*#__PURE__*/React.createElement(\"span\", {\n    className: classes.filename,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 20\n    }\n  }, values.photo ? values.photo.name : ''), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 101\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    id: \"name\",\n    label: \"Name\",\n    className: classes.textField,\n    value: values.name,\n    onChange: handleChange('name'),\n    margin: \"normal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 144\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    id: \"multiline-flexible\",\n    label: \"About\",\n    multiline: true,\n    rows: \"2\",\n    value: values.about,\n    onChange: handleChange('about'),\n    className: classes.textField,\n    margin: \"normal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    id: \"email\",\n    type: \"email\",\n    label: \"Email\",\n    className: classes.textField,\n    value: values.email,\n    onChange: handleChange('email'),\n    margin: \"normal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 161\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    id: \"password\",\n    type: \"password\",\n    label: \"Password\",\n    className: classes.textField,\n    value: values.password,\n    onChange: handleChange('password'),\n    margin: \"normal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 11\n    }\n  }), \" \", values.error && /*#__PURE__*/React.createElement(Typography, {\n    component: \"p\",\n    color: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 30\n    }\n  }, /*#__PURE__*/React.createElement(Icon, {\n    color: \"error\",\n    className: classes.error,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 15\n    }\n  }, \"error\"), values.error)), /*#__PURE__*/React.createElement(CardActions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    color: \"primary\",\n    variant: \"contained\",\n    onClick: clickSubmit,\n    className: classes.submit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 11\n    }\n  }, \"Submit\")));\n}","map":{"version":3,"sources":["/Users/batson24/Desktop/Date_Site/frontend/src/Components/Editprofile.jsx"],"names":["React","useEffect","useState","Card","CardActions","CardContent","Button","TextField","Typography","Icon","Avatar","FileUpload","makeStyles","auth","read","update","Redirect","useStyles","theme","card","maxWidth","margin","textAlign","marginTop","spacing","paddingBottom","title","color","palette","protectedTitle","error","verticalAlign","textField","marginLeft","marginRight","width","submit","marginBottom","bigAvatar","height","input","display","filename","EditProfile","match","classes","values","setValues","name","about","photo","email","password","redirectToProfile","id","jwt","isAuthenticated","abortController","AbortController","signal","userId","params","t","token","then","data","_id","cleanup","abort","clickSubmit","userData","FormData","append","passoword","handleChange","event","value","target","files","photoUrl","Date","getTime"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react'\nimport Card from '@material-ui/core/Card'\nimport CardActions from '@material-ui/core/CardActions'\nimport CardContent from '@material-ui/core/CardContent'\nimport Button from '@material-ui/core/Button'\nimport TextField from '@material-ui/core/TextField'\nimport Typography from '@material-ui/core/Typography'\nimport Icon from '@material-ui/core/Icon'\nimport Avatar from '@material-ui/core/Avatar'\nimport FileUpload from '@material-ui/icons/AddPhotoAlternate'\nimport { makeStyles } from '@material-ui/core/styles'\nimport auth from './../auth/auth-helper'\nimport {read, update} from './api-user.js'\nimport {Redirect} from 'react-router-dom'\n\nconst useStyles = makeStyles(theme => ({\n  card: {\n    maxWidth: 600,\n    margin: 'auto',\n    textAlign: 'center',\n    marginTop: theme.spacing(5),\n    paddingBottom: theme.spacing(2)\n  },\n  title: {\n    margin: theme.spacing(2),\n    color: theme.palette.protectedTitle\n  },\n  error: {\n    verticalAlign: 'middle'\n  },\n  textField: {\n    marginLeft: theme.spacing(1),\n    marginRight: theme.spacing(1),\n    width: 300\n  },\n  submit: {\n    margin: 'auto',\n    marginBottom: theme.spacing(2)\n  },\n  bigAvatar: {\n    width: 60,\n    height: 60,\n    margin: 'auto'\n  },\n  input: {\n    display: 'none'\n  },\n  filename:{\n    marginLeft:'10px'\n  }\n}))\n\nexport default function EditProfile({ match }) {\n  const classes = useStyles()\n  const [values, setValues] = useState({\n    name: '',\n    about: '',\n    photo: '',\n    email: '',\n    password: '',\n    redirectToProfile: false,\n    error: '',\n    id: ''\n  })\n  const jwt = auth.isAuthenticated()\n\n  useEffect(() => {\n    const abortController = new AbortController()\n    const signal = abortController.signal\n\n    read({\n      userId: match.params.userId\n    }, {t: jwt.token}, signal).then((data) => {\n      if (data & data.error) {\n        setValues({...values, error: data.error})\n      } else {\n        setValues({...values, id: data._id, name: data.name, email: data.email, about: data.about})\n      }\n    })\n    return function cleanup(){\n      abortController.abort()\n    }\n\n  }, [match.params.userId])\n  \n  const clickSubmit = () => {\n    let userData = new FormData()\n    values.name && userData.append('name', values.name)\n    values.email && userData.append('email', values.email)\n    values.passoword && userData.append('passoword', values.passoword)\n    values.about && userData.append('about', values.about)\n    values.photo && userData.append('photo', values.photo)\n    update({\n      userId: match.params.userId\n    }, {\n      t: jwt.token\n    }, userData).then((data) => {\n      if (data && data.error) {\n        setValues({...values, error: data.error})\n      } else {\n        setValues({...values, 'redirectToProfile': true})\n      }\n    })\n  }\n  const handleChange = name => event => {\n    const value = name === 'photo'\n      ? event.target.files[0]\n      : event.target.value\n    //userData.set(name, value)\n    setValues({...values, [name]: value })\n  }\n    const photoUrl = values.id\n                 ? `/api/users/photo/${values.id}?${new Date().getTime()}`\n                 : '/api/users/defaultphoto'\n    if (values.redirectToProfile) {\n      return (<Redirect to={'/user/' + values.id}/>)\n    }\n    return (\n      <Card className={classes.card}>\n        <CardContent>\n          <Typography variant=\"h6\" className={classes.title}>\n            Edit Profile\n          </Typography>\n          <Avatar src={photoUrl} className={classes.bigAvatar}/><br/>\n          <input accept=\"image/*\" onChange={handleChange('photo')} className={classes.input} id=\"icon-button-file\" type=\"file\" />\n          <label htmlFor=\"icon-button-file\">\n            <Button variant=\"contained\" color=\"default\" component=\"span\">\n              Upload\n              <FileUpload/>\n            </Button>\n          </label> <span className={classes.filename}>{values.photo ? values.photo.name : ''}</span><br/>\n          <TextField id=\"name\" label=\"Name\" className={classes.textField} value={values.name} onChange={handleChange('name')} margin=\"normal\"/><br/>\n          <TextField\n            id=\"multiline-flexible\"\n            label=\"About\"\n            multiline\n            rows=\"2\"\n            value={values.about}\n            onChange={handleChange('about')}\n            className={classes.textField}\n            margin=\"normal\"\n          /><br/>\n          <TextField id=\"email\" type=\"email\" label=\"Email\" className={classes.textField} value={values.email} onChange={handleChange('email')} margin=\"normal\"/><br/>\n          <TextField id=\"password\" type=\"password\" label=\"Password\" className={classes.textField} value={values.password} onChange={handleChange('password')} margin=\"normal\"/>\n          <br/> {\n            values.error && (<Typography component=\"p\" color=\"error\">\n              <Icon color=\"error\" className={classes.error}>error</Icon>\n              {values.error}\n            </Typography>)\n          }\n        </CardContent>\n        <CardActions>\n          <Button color=\"primary\" variant=\"contained\" onClick={clickSubmit} className={classes.submit}>Submit</Button>\n        </CardActions>\n      </Card>\n    )\n}"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"/Users/batson24/Desktop/Date_Site/frontend/src/Components/Newsfeed.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport Typography from '@material-ui/core/Typography';\nimport Divider from '@material-ui/core/Divider';\nimport auth from '../Components/authenticator';\nimport PostList from './PostList';\nimport { listNewsFeed } from './api-post.js';\nimport NewPost from '../Components/NewPost';\nconst useStyles = makeStyles(theme => ({\n  card: {\n    margin: 'auto',\n    paddingTop: 0,\n    paddingBottom: theme.spacing(3)\n  },\n  title: {\n    padding: `${theme.spacing(3)}px ${theme.spacing(2.5)}px ${theme.spacing(2)}px`,\n    color: theme.palette.openTitle,\n    fontSize: '1em'\n  },\n  media: {\n    minHeight: 330\n  }\n}));\nexport default function Newsfeed() {\n  const classes = useStyles();\n  const [posts, setPosts] = useState([]);\n  const jwt = auth.isAuthenticated();\n  useEffect(() => {\n    const abortController = new AbortController();\n    const signal = abortController.signal;\n    listNewsFeed({\n      userId: jwt.user._id\n    }, {\n      t: jwt.token\n    }, signal).then(data => {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        setPosts(data);\n      }\n    });\n    return function cleanup() {\n      abortController.abort();\n    };\n  }, []);\n\n  const addPost = post => {\n    const updatedPosts = [...posts];\n    updatedPosts.unshift(post);\n    setPosts(updatedPosts);\n  };\n\n  const removePost = post => {\n    const updatedPosts = [...posts];\n    const index = updatedPosts.indexOf(post);\n    updatedPosts.splice(index, 1);\n    setPosts(updatedPosts);\n  };\n\n  return /*#__PURE__*/React.createElement(Card, {\n    className: classes.card,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    type: \"title\",\n    className: classes.title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }\n  }, \"Newsfeed\"), /*#__PURE__*/React.createElement(Divider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(NewPost, {\n    addUpdate: addPost,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Divider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(PostList, {\n    removeUpdate: removePost,\n    posts: posts,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }\n  }));\n}","map":{"version":3,"sources":["/Users/batson24/Desktop/Date_Site/frontend/src/Components/Newsfeed.jsx"],"names":["React","useState","useEffect","makeStyles","Card","Typography","Divider","auth","PostList","listNewsFeed","NewPost","useStyles","theme","card","margin","paddingTop","paddingBottom","spacing","title","padding","color","palette","openTitle","fontSize","media","minHeight","Newsfeed","classes","posts","setPosts","jwt","isAuthenticated","abortController","AbortController","signal","userId","user","_id","t","token","then","data","error","console","log","cleanup","abort","addPost","post","updatedPosts","unshift","removePost","index","indexOf","splice"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react'\nimport {makeStyles} from '@material-ui/core/styles'\nimport Card from '@material-ui/core/Card'\nimport Typography from '@material-ui/core/Typography'\nimport Divider from '@material-ui/core/Divider'\nimport auth from '../Components/authenticator'\nimport PostList from './PostList'\nimport {listNewsFeed} from './api-post.js'\nimport NewPost from '../Components/NewPost'\n\nconst useStyles = makeStyles(theme => ({\n  card: {\n    margin: 'auto',\n    paddingTop: 0,\n    paddingBottom: theme.spacing(3)\n  },\n  title: {\n    padding:`${theme.spacing(3)}px ${theme.spacing(2.5)}px ${theme.spacing(2)}px`,\n    color: theme.palette.openTitle,\n    fontSize: '1em'\n  },\n  media: {\n    minHeight: 330\n  }\n}))\nexport default function Newsfeed () {\n  const classes = useStyles()\n  const [posts, setPosts] = useState([])\n  const jwt = auth.isAuthenticated()\n\n  useEffect(() => {\n    const abortController = new AbortController()\n    const signal = abortController.signal\n\n    listNewsFeed({\n      userId: jwt.user._id\n    }, {\n      t: jwt.token\n    }, signal).then((data) => {\n      if (data.error) {\n        console.log(data.error)\n      } else {\n        setPosts(data)\n      }\n    })\n    return function cleanup(){\n      abortController.abort()\n    }\n\n  }, [])\n\n  const addPost = (post) => {\n    const updatedPosts = [...posts]\n    updatedPosts.unshift(post)\n    setPosts(updatedPosts)\n  }\n  const removePost = (post) => {\n    const updatedPosts = [...posts]\n    const index = updatedPosts.indexOf(post)\n    updatedPosts.splice(index, 1)\n    setPosts(updatedPosts)\n  }\n\n    return (\n      <Card className={classes.card}>\n        <Typography type=\"title\" className={classes.title}>\n          Newsfeed\n        </Typography>\n        <Divider/>\n        <NewPost addUpdate={addPost}/>\n        <Divider/>\n        <PostList removeUpdate={removePost} posts={posts}/>\n      </Card>\n    )\n}"]},"metadata":{},"sourceType":"module"}